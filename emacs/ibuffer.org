#+title: IBuffer
#+property: header-args :results output silent :comments link :noweb yes :tangle no

* Introduction
#+begin_src emacs-lisp :tangle yes
  (use-package ibuffer
    :straight nil
    :config
    <<filters>>
    (defalias 'list-buffers 'ibuffer
      "Use ibuffer instead of list-buffers")
    :custom
    (ibuffer-expert t))
#+end_src

* Filters
:PROPERTIES:
:header-args: :noweb-ref filters
:END:

#+begin_src emacs-lisp
  (setq ibuffer-show-empty-filter-groups nil)
  (setq ibuffer-saved-filter-groups
        '(("default"
           ("Misc"      (name . "^\\*.*\\*$"))
           ("Magit"     (name . "magit"))
           ("Src"       (name . "\*Org Src"))
           ("Dired"     (mode . dired-mode))
           ("My Org"    (directory . "/Users/g/org"))
           ("Config"    (or
                         (directory . "/Users/g/.config")
                         (directory . "/usr/local/share/emacs")))
           )))
#+end_src

#+results:
| default | (Misc (name . ^\*.*\*$)) | (Magit (name . magit)) | (Src (name . *Org Src)) | (Dired (mode . dired-mode)) | (My Org (directory . /Users/g/org)) | (Config (directory . /Users/g/.config)) |

* Defaults

#+begin_src emacs-lisp :tangle yes
  (defun actuator-ibuffer-setup ()
    "Setup ibuffer defaults."
    (require 'ibuf-ext)
    (ibuffer-switch-to-saved-filter-groups "default")
    (ibuffer-auto-mode 1)
    (toggle-truncate-lines +1))
  (add-hook 'ibuffer-mode-hook #'actuator-ibuffer-setup)
#+end_src
